!function(t){t.fn.manfred=function(e){function i(t,e){return t=t.replace("#",""),r=parseInt(t.substring(0,2),16),g=parseInt(t.substring(2,4),16),b=parseInt(t.substring(4,6),16),result="rgba("+r+","+g+","+b+","+e/100+")"}function n(e){if($this.hasClass("iframe"))return{html:t("<iframe />").attr("src",e).css({width:h.width,height:h.height})};if($this.hasClass("youtube")){{h.width}return h.autosize&&(vidHeight=h.width/1.33333),{html:t("<iframe />").attr({src:e,width:h.width,height:vidHeight,frameborder:0,allowfullscreen:"allowfullscreen"})}}return t(e).length?{html:t(e).html(),width:t(e).width(),height:t(e).height()}:{html:e}}function s(){h.hideFlash&&t("object,embed").css("visibility","hidden"),h.scroll&&t("body").css("overflow","hidden"),f.fadeIn(h.speed,function(){t("input:first",f).length&&t("input:first",f).focus()}),a(),f.delegate("#close-manfred","click",function(t){d(),t.preventDefault()}),h.escape&&t(document).keyup(function(t){27==t.keyCode&&d()}),f.on("click",function(t){t.target===this&&h.bgclose&&d()})}function o(e){var i=t("#manfred-content"),n=e.width,r=e.height;"undefined"==typeof n&&h.autosize&&(n=h.width),"undefined"==typeof r&&h.autosize&&(r=h.height),"undefined"!=typeof $this.attr("data-manfred-width")&&(n=$this.attr("data-manfred-width")),"undefined"!=typeof $this.attr("data-manfred-height")&&(r=$this.attr("data-manfred-height")),i.html(e.html).css({width:n,height:r}).append('<a href="#close" id="close-manfred"><img src="img/close.png" /></a>')}function a(){if(!h.position)return!1;var e=t(window).height(),i=t("#manfred-content").outerHeight();"iframe"===h.position&&(e=t("body").height());var n=e-i;e>i&&"center"==h.position&&t("#manfred-content").css("margin-top",n/2)}function d(){f.delay(h.delay).fadeOut(h.speed,function(){t("object, embed").css("visibility","visible"),h.scroll&&t("body").css("overflow","auto")})}var h=t.extend({autosize:!0,bgclose:!0,bgcolor:"#888888",bgopacity:"60",delay:200,escape:!0,height:"auto",kitten:!1,position:"center",scroll:!1,speed:200,width:400},e),c=h.bgcolor;target=this.attr("href"),$this=this,h.bgcolor.indexOf("#")>-1&&(c=i(h.bgcolor,h.bgopacity));var f=t("<div />").attr("id","manfred").css({display:"none",background:c}).html('<div id="manfred-content"></div>');return t("body:first").append(f),$this.bind("click",function(e){e.preventDefault(),$this=t(this),o(n($this.attr("href"))),s()}),t(window).resize(function(){a()}),this}}(jQuery);